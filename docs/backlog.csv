Issue Type,Summary,Description,Priority,Labels,Components,Epic Name,Epic Link
Epic,"EP-A Autenticación y sesión","Objetivo: gestionar login/recordarme, sesión persistente y modo lectura offline si ya hay sesión.",High,"epic,login","Frontend","EP-A Autenticación y sesión",
Epic,"EP-B Preparación y sincronización inicial","Objetivo: descargar datasets del día con progreso, reanudación y dejar la app operable offline.",High,"epic,sync","Frontend;Sync","EP-B Preparación y sincronización inicial",
Epic,"EP-C Lista del día","Objetivo: listar clientes del día con 'porqué', filtros y acceso a acciones rápidas.",High,"epic,list","Frontend","EP-C Lista del día",
Epic,"EP-D Detalle de cliente","Objetivo: mostrar ficha del cliente y recomendaciones/acciones priorizadas.",High,"epic,detalle","Frontend","EP-D Detalle de cliente",
Epic,"EP-E Feedback comercial","Objetivo: captura de resultado/motivo/nota con operación offline (cola) e idempotencia.",High,"epic,feedback,offline","Frontend;Backend;Sync","EP-E Feedback comercial",
Epic,"EP-F Inteligencia de mercado (propia)","Objetivo: registrar quiebres e inventario de marcas propias con operación offline.",Medium,"epic,inteligencia,quiebre,inventario","Frontend;Backend;Sync","EP-F Inteligencia de mercado (propia)",
Epic,"EP-G Inteligencia de mercado (competencia)","Objetivo: capturar inventario/observaciones de competencia bajo feature flag.",Low,"epic,competencia,feature-flag","Frontend;Backend","EP-G Inteligencia de mercado (competencia)",
Epic,"EP-H Cierre de visita","Objetivo: finalizar visita con validación geo básica, resumen y notas.",High,"epic,cierre,geo","Frontend;Backend","EP-H Cierre de visita",
Epic,"EP-I Sincronización final","Objetivo: drenar cola, mostrar resumen (enviados/fallidos/duración) y permitir reintento.",High,"epic,syncfinal,offline","Frontend;Sync","EP-I Sincronización final",
Epic,"EP-X PWA & Offline","Objetivo: manifest, instalación, SW app-shell, IndexedDB y cola offline con backoff.",High,"epic,pwa,offline","Frontend;PWA;Sync","EP-X PWA & Offline",
Epic,"EP-Y Observabilidad y seguridad","Objetivo: telemetría UX/negocio, health checks/contratos y seguridad básica.",High,"epic,observabilidad,seguridad","Backend;Ops;Frontend","EP-Y Observabilidad y seguridad",

Story,"US-A1 Iniciar sesión con ID y contraseña","Como asesor quiero autenticarme para acceder a mi ruta.\nCriterios de aceptación:\n- Given ID y contraseña válidos When pulso Entrar Then accedo a Preparación/Sync inicial y queda sesión creada.\n- Given marco Recordarme When inicio Then la sesión persiste hasta logout.\n- Given credenciales inválidas When pulso Entrar Then veo 'Credenciales inválidas' y estados de error.\n- Given estoy sin conexión y ya inicié antes When abro app Then entro en modo lectura a datos locales.",High,"login,auth,screen_login","Frontend","",TO_FILL_EP-A
Story,"US-A2 Recuperación y bloqueo de sesión","Como asesor quiero manejar reintentos y recuperación para no bloquearme.\nCriterios:\n- Given 5 intentos fallidos When reintento Then mostrar cooldown (p.ej., 60s) y opción 'Olvidé mi contraseña'.\n- Given hago logout When confirmo Then limpiar datos sensibles y caches.",Medium,"login,auth,screen_login","Frontend","",TO_FILL_EP-A

Story,"US-B1 Descargar datasets del día","Como asesor quiero ver progreso de sincronización para trabajar offline.\nCriterios:\n- Given autenticado When inicio preparación Then listar datasets con estado (pendiente/progreso/completo/error).\n- Given 100% When toco Continuar Then navego a Lista del día con datos en IndexedDB.\n- Given error de red When reintento Then reanuda sin redescargar lo completo.\n- Given sin conexión When inicio Then aviso y Reintentar; no continúa sin datos locales.",High,"sync,screen_sync","Frontend;Sync","",TO_FILL_EP-B

Story,"US-C1 Ver lista del día con 'porqué'","Como asesor quiero ver visitas con motivo/ prioridad para planear mi ruta.\nCriterios:\n- Given datos locales When abro lista Then veo filtros y para cada cliente: nombre, dirección, razón de visita y CTA Iniciar.\n- Given sin conexión When abro Then datos de IndexedDB y banner offline.\n- Given pulso Sincronizar When hay red Then actualiza y muestra toast.\n- Given toco chip de acción rápida When navego Then abre pantalla correspondiente con cliente preseleccionado.",High,"lista,screen_lista","Frontend","",TO_FILL_EP-C
Story,"US-C2 Búsqueda y orden","Como asesor quiero buscar/ordenar clientes para priorizar.\nCriterios:\n- Filtrar por nombre/estatus; ordenar por prioridad o distancia (si hay permisos).",Medium,"lista,screen_lista","Frontend","",TO_FILL_EP-C

Story,"US-D1 Detalle con recomendaciones","Como asesor quiero ver ficha y recomendaciones para ejecutar la visita.\nCriterios:\n- Given selecciono cliente When abro detalle Then veo datos, razón de visita, recomendaciones con prioridad y CTA Registrar feedback.\n- Given sin conexión When abro Then datos locales y solo acciones offline habilitadas.\n- UX: CTA principal sticky en zona de pulgar.",High,"detalle,screen_detalle","Frontend","",TO_FILL_EP-D

Story,"US-E1 Capturar feedback a recomendación","Como asesor quiero registrar resultado/motivo/nota para retroalimentar plan.\nCriterios:\n- Given abro formulario When selecciono Resultado Then se habilita Añadir motivo (catálogo) y Nota.\n- Given sin conexión When guardo Then se encola con idempotencyKey y estado 'Pendiente de envío'.\n- Given vuelve conexión When corre sync Then pendientes se envían y pasan a 'Enviado' sin duplicados.\n- Validar: no guardar sin Resultado; para Rechazada motivo requerido.",High,"feedback,screen_feedback,offline","Frontend;Backend;Sync","",TO_FILL_EP-E

Story,"US-F1 Capturar quiebre por SKU","Como asesor quiero indicar SKUs en quiebre para informar reposición.\nCriterios:\n- Listado de SKUs con búsqueda; selección múltiple; Guardar crea eventos (offline-enqueue si aplica).\n- Mostrar última act. por SKU; si capturado hoy, advertir 'ya registrado'.\n- Validar al menos un SKU.",Medium,"quiebre,inteligencia,screen_quiebre","Frontend;Backend;Sync","",TO_FILL_EP-F
Story,"US-F2 Registrar inventario (propios)","Como asesor quiero registrar existencias/precio para seguimiento.\nCriterios:\n- Edición en tabla con validaciones numéricas/rangos.\n- Offline: guarda local y encola; al sincronizar, actualizar timestamp y limpiar pendientes.\n- Guardar habilitado solo con cambios; Cancelar revierte.",Medium,"inventario,inteligencia,screen_inventario_propios","Frontend;Backend;Sync","",TO_FILL_EP-F

Story,"US-G1 Inventario (competencia)","Como asesor quiero capturar inventario de competencia bajo feature flag.\nCriterios:\n- Catálogo de terceros y observaciones (precio, facing, nivel).\n- Activado/desactivado por flag; oculto si deshabilitado.",Low,"competencia,feature-flag,screen_inventario_competencia","Frontend;Backend","",TO_FILL_EP-G

Story,"US-H1 Finalizar visita (geo + resumen)","Como asesor quiero cerrar la visita con validación de ubicación y resumen.\nCriterios:\n- Given abro finalizar When hay permisos Then validar precisión mínima; si falla, captura manual + justificativo (por flag).\n- Mostrar tareas pendientes y recomendaciones resueltas; bloquear Finalizar si hay formularios sin guardar.\n- Offline: permite finalizar y encola evento con geo snapshot.\n- Al cerrar, marcar cliente como visitado y mostrar toast.",High,"cierre,geo,screen_finalizar","Frontend;Backend","",TO_FILL_EP-H

Story,"US-I1 Sincronización final / resumen","Como asesor quiero enviar pendientes y ver resultados del envío.\nCriterios:\n- Ejecutar drain de cola: feedback/inventarios/quiebre/cierre.\n- Mostrar enviados/fallidos/duración y hora de última sync; si fallidos>0, Reintentar.\n- Al terminar con 0 pendientes, botón Terminar.",High,"syncfinal,offline,screen_syncfinal","Frontend;Sync","",TO_FILL_EP-I

Story,"US-X1 PWA instalable y shell offline","Como usuario quiero instalar la app y usar el shell sin red tras preparación.\nCriterios:\n- Manifest válido; SW registra; precache de app-shell; primera carga funcional sin red después de sync inicial.",High,"pwa,offline,sw","Frontend;PWA","",TO_FILL_EP-X
Story,"US-X2 IndexedDB y repositorios","Como sistema quiero persistir datasets y pendientes localmente.\nCriterios:\n- Esquemas: PlanDeRuta, Clientes, Recomendaciones, FeedbackPendiente, InventarioPendiente, CierresPendientes; migraciones versionadas.",High,"pwa,indexeddb,offline","Frontend;PWA;Sync","",TO_FILL_EP-X
Story,"US-X3 Cola offline con backoff","Como sistema quiero reintentos y deduplicación para envíos confiables.\nCriterios:\n- Backoff exponencial; idempotencyKey; políticas por tipo; estados de UI (offline/sincronizando/pendiente).",High,"offline,cola,sw","Frontend;Sync;Backend","",TO_FILL_EP-X

Story,"US-Y1 Telemetría UX y negocio","Como operador quiero métricas y eventos para observar salud y uso.\nCriterios:\n- LCP/FCP/errores JS; tasa instalación PWA.\n- Eventos: feedback guardado, visita finalizada, sync final.",High,"observabilidad,metrics","Frontend;Ops","",TO_FILL_EP-Y
Story,"US-Y2 Health & contratos","Como integrador quiero contratos y health checks disponibles.\nCriterios:\n- OpenAPI: GET /plan-de-ruta, POST /feedback, POST /quiebre, POST /inventario, POST /finalizar-visita.\n- Health checks verdes.",High,"api,contratos,health","Backend;Ops","",TO_FILL_EP-Y
Story,"US-Y3 Seguridad básica","Como responsable de seguridad quiero controles mínimos activos.\nCriterios:\n- Tokens seguros, headers (CSP/HSTS), CORS; sin datos sensibles en logs.",High,"seguridad,headers,cors","Backend;Frontend","",TO_FILL_EP-Y
